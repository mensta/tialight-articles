---
id: "146"
title: "ニコニコ動画のコメント機能ってJavaScriptだけで作れそう"
date: "2019-09-11"
image: "/images/2019/09/ogp.png"
categories: 
  - "javascript"
---

最近思ったんだが

ニコニコ動画のコメント機能ってJavaScriptだけで作れそうだよね？

もちろんhtmlは使うよ。

プレイヤーはhtml5でコメント流すのとかはjavascriptで。

「え？無理じゃね？」って思うよね

説明不足でした申し訳ない。もうちょい詳しく説明する

## コメント投稿できなくない？

JavaScriptだとコメント投稿できなくない？ログにコメント追加しないと次読み込んだとき全部消えるやろう。

たしかに。でもサーバーをNode.jsで立てれば解決できる。

これはちょっとズルいかｗ？でもnode.jsもほぼjavascriptと一緒だからセーフじゃない？

phpも一緒に使ってログに書き込みすればわざわざnode.jsでサーバー立てる必要ないじゃんって思うかもしれない。

けどnode.jsとjavascriptでやったほうがいいとこもある。

## 生放送でのコメントにも対応できる

ニコ生のコメントってリアルタイムだよね

生放送中に誰かがコメント書き込んだら自分のみてる画面に流れてくるし、自分が書き込んだら直後にみんなの画面にも流れる。

リアルタイム性がある。これもjavascriptとnode.jsなら再現可能。

phpだとリアルタイム性が欠けてしまう。疑似リアルタイムなら作れるけど。

使用するのはwebsocket。

このプロトコルはリアルタイム通信によく用いられる。

生放送でのリアルタイムコメントにも対応可能。

## 作ったことあるの？

作ろうと思ったけどニコニコ動画あるし作ってもあまり意味がないと思った。

でも流れるコメントの実装は先人が作ったものをそのまま使えるし

あとはWebSocketでリアルタイムチャット作る感覚で簡単にコメント送受信の部分も解決じゃない？
